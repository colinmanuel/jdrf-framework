(function(){var e,t,n,r,i,s,o,u;e=typeof jQuery!="undefined"&&jQuery!==null?jQuery:Zepto;u=e.scrollTo!=null&&typeof jQuery!="undefined"&&jQuery!==null?function(t,n,r){return e.scrollTo(t,n,{axis:"y",onAfter:r})}:e.scrollTo!=null?e.scrollTo:function(e,t,n){window.scrollTo(0,e);return n()};n={views:".view",activeView:null,deferOn:!1,duration:e.fx.speeds._default,easing:typeof Zepto!="undefined"&&Zepto!==null?"ease-out":"swing",useTransformProps:typeof Zepto!="undefined"&&Zepto!==null,use3D:typeof Modernizr!="undefined"&&Modernizr!==null&&Modernizr.csstransforms3d,cssPrefix:e.fx.cssPrefix!=null?e.fx.cssPrefix:"",resizeHeight:!0,heightDuration:null,concurrentHeightChange:typeof Zepto=="undefined"||Zepto===null,scrollOn:"start",scrollCallback:u,scrollDuration:null,scrollToContainerTop:!0,concurrentScroll:typeof Zepto=="undefined"||Zepto===null,maintainViewportHeight:null,dataAttrEvent:"click",dataAttr:{push:"pushview",pop:"popview"},classNames:{container:"SimpleSlideView-container",view:"SimpleSlideView-view",activeView:"SimpleSlideView-view-active"},eventNames:{on:"slideViewOn",off:"slideViewOff",beforeOn:"slideViewBeforeOn",beforeOff:"slideViewBeforeOff",deferred:"slideViewDeferred",viewChangeStart:"viewChangeStart",viewChangeEnd:"viewChangeEnd"}};o=function(t,n){var r,i,s,o,u;r=e(t);i={};for(o=0,u=n.length;o<u;o++){s=n[o];i[s]=""}return r.css(i)};r=function(t){return e.fn.outerHeight!=null?e(t).outerHeight():e(t).height()};i=function(t){return e.fn.outerWidth!=null?e(t).outerWidth():e(t).width()};s=function(e,t,n){t==null&&(t=!0);n==null&&(n=!1);return e==="push"?t:n};t=function(){function t(t,r){this.options=e.extend(!0,{},n,r);this.options.heightDuration==null&&(this.options.heightDuration=this.options.duration);this.options.scrollDuration==null&&(this.options.scrollDuration=this.options.duration);this.options.maintainViewportHeight==null&&(this.options.maintainViewportHeight=this.options.resizeHeight&&this.options.scrollOnStart);window.innerHeight==null&&(this.options.maintainViewportHeight=!1);this.$container=e(t);this.$views=typeof this.options.views=="string"?this.$container.find(this.options.views):e(this.options.views);this.$activeView=this.options.activeView!=null?e(this.options.activeView):this.$views.first();this.isActive=!1;this.options.deferOn?this.$container.trigger(this.options.eventNames.deferred):this.on()}t.prototype.on=function(){var t=this;if(this.isActive)return;this.$container.trigger(this.options.eventNames.beforeOn);this.queue=[];this.isActive=!0;this.isSliding=!1;this.$container.addClass(this.options.classNames.container);this.$views.addClass(this.options.classNames.view);this.$activeView.addClass(this.options.classNames.activeView);this.$views.not(this.$activeView).css("display","none");this.options.maintainViewportHeight&&(this.lastViewportHeight=window.innerHeight);if(this.options.dataAttrEvent!=null){this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]",function(n){var r,i;r=e(n.currentTarget);i=r.data(t.options.dataAttr.push);i.length||(i=r.attr("href"));if(i.length){n.preventDefault();return t.pushView(i)}});this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]",function(n){var r,i;r=e(n.currentTarget);i=r.data(t.options.dataAttr.pop);i.length||(i=r.attr("href"));if(i.length){n.preventDefault();return t.popView(i)}})}return this.$container.trigger(this.options.eventNames.on)};t.prototype.off=function(){if(!this.isActive)return;this.$container.trigger(this.options.eventNames.beforeOff);this.queue=[];this.isActive=!1;this.isSliding=!1;this.$container.removeClass(this.options.classNames.container);this.$views.removeClass(this.options.classNames.view+" "+this.options.classNames.activeView);this.$views.css("display","");this.options.maintainViewportHeight&&e("html").css("min-height","");if(this.options.dataAttrEvent!=null){this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]");this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]")}return this.$container.trigger(this.options.eventNames.off)};t.prototype.toggle=function(e){e==null&&(e=!this.isActive);return e?this.on():this.off()};t.prototype.changeView=function(t,n){var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N=this;a=e(t);if(!a.length||a[0]===this.$activeView[0])return;l=arguments;if(this.isSliding||this.queue.length)return this.queue.push(l);this.isSliding=!0;this.$container.trigger(this.options.eventNames.viewChangeStart,l);u=this.$activeView.add(a);b={};m={};w=["left","position","top","width"];v=i(this.$container);d={height:r(this.$container),overflow:"hidden",position:"relative",width:"100%"};f={};E={};h={position:"absolute",top:0,width:v};if(this.options.useTransformProps){S=this.options.cssPrefix+"transform";T=this.options.use3D?"translate3d(":"translateX(";x=this.options.use3D?", 0, 0)":")";w.push(S);h.left=0;E[S]=T+s(n,100,-100)+"%"+x;b[S]=T+s(n,-100,100)+"%"+x;m[S]=T+"0"+x}else{f.left=0;E.left=s(n,v,v*-1);b.left=s(n,v*-1,v);m.left=0}y=function(){N.isSliding=!1;N.$container.trigger(N.options.eventNames.viewChangeEnd,l);if(N.queue.length)return N.changeView.apply(N,N.queue.shift())};g=function(){o(N.$container,["height","overflow","position","width"]);N.$activeView.removeClass(N.options.classNames.activeView);a.addClass(N.options.classNames.activeView);N.$activeView=a;return N.options.scrollCallback&&N.options.scrollOn==="end"?N._scrollToTop(y):y()};c=function(){if(N.options.resizeHeight){if(N.options.maintainViewportHeight&&window.innerHeight>N.lastViewportHeight){N.lastViewportHeight=window.innerHeight;$html.css("min-height",N.lastViewportHeight+top+"px")}return N.$container.animate({height:r(a)},N.options.heightDuration,N.options.easing,g)}return g()};p=function(){N.$container.css(d);u.css(h);N.$activeView.css(f);a.css(E);a.show();N.$activeView.animate(b,N.options.duration,N.options.easing,function(){return o(this,w).hide()});a.animate(m,N.options.duration,N.options.easing,function(){o(a,w);if(!N.options.concurrentHeightChange)return c()});if(N.options.concurrentHeightChange)return c()};if(this.options.scrollCallback&&this.options.scrollOn==="start"){if(!this.options.concurrentScroll)return this._scrollToTop(p);this._scrollToTop()}return p()};t.prototype._scrollToTop=function(t){var n;n=this.options.scrollToContainerTop?this.$container.position().top:0;if(e(window).scrollTop()>n)return this.options.scrollCallback(n,this.options.scrollDuration,t);if(t!=null)return t()};t.prototype.pushView=function(e){return this.changeView(e,"push")};t.prototype.popView=function(e){return this.changeView(e,"pop")};return t}();e.fn.simpleSlideView=function(n,r){n==null&&(n={});typeof n!="object"&&(n={views:n});typeof r=="object"&&e.extend(n,r);return new t(this,n)}}).call(this);