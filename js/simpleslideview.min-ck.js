!function(){var e,t,n,r,i,s,o,u;e="undefined"!=typeof jQuery&&null!==jQuery?jQuery:Zepto,u=null!=e.scrollTo&&"undefined"!=typeof jQuery&&null!==jQuery?function(t,n,r){return e.scrollTo(t,n,{axis:"y",onAfter:r})}:null!=e.scrollTo?e.scrollTo:function(e,t,n){return window.scrollTo(0,e),n()},n={views:".view",activeView:null,deferOn:!1,duration:e.fx.speeds._default,easing:"undefined"!=typeof Zepto&&null!==Zepto?"ease-out":"swing",useTransformProps:"undefined"!=typeof Zepto&&null!==Zepto,use3D:"undefined"!=typeof Modernizr&&null!==Modernizr&&Modernizr.csstransforms3d,cssPrefix:null!=e.fx.cssPrefix?e.fx.cssPrefix:"",resizeHeight:!0,heightDuration:null,concurrentHeightChange:"undefined"==typeof Zepto||null===Zepto,scrollOn:"start",scrollCallback:u,scrollDuration:null,scrollToContainerTop:!0,concurrentScroll:"undefined"==typeof Zepto||null===Zepto,maintainViewportHeight:null,dataAttrEvent:"click",dataAttr:{push:"pushview",pop:"popview"},classNames:{container:"SimpleSlideView-container",view:"SimpleSlideView-view",activeView:"SimpleSlideView-view-active"},eventNames:{on:"slideViewOn",off:"slideViewOff",beforeOn:"slideViewBeforeOn",beforeOff:"slideViewBeforeOff",deferred:"slideViewDeferred",viewChangeStart:"viewChangeStart",viewChangeEnd:"viewChangeEnd"}},o=function(t,n){var r,i,s,o,u;for(r=e(t),i={},o=0,u=n.length;u>o;o++)s=n[o],i[s]="";return r.css(i)},r=function(t){return null!=e.fn.outerHeight?e(t).outerHeight():e(t).height()},i=function(t){return null!=e.fn.outerWidth?e(t).outerWidth():e(t).width()},s=function(e,t,n){return null==t&&(t=!0),null==n&&(n=!1),"push"===e?t:n},t=function(){function t(t,r){this.options=e.extend(!0,{},n,r),null==this.options.heightDuration&&(this.options.heightDuration=this.options.duration),null==this.options.scrollDuration&&(this.options.scrollDuration=this.options.duration),null==this.options.maintainViewportHeight&&(this.options.maintainViewportHeight=this.options.resizeHeight&&this.options.scrollOnStart),null==window.innerHeight&&(this.options.maintainViewportHeight=!1),this.$container=e(t),this.$views="string"==typeof this.options.views?this.$container.find(this.options.views):e(this.options.views),this.$activeView=null!=this.options.activeView?e(this.options.activeView):this.$views.first(),this.isActive=!1,this.options.deferOn?this.$container.trigger(this.options.eventNames.deferred):this.on()}return t.prototype.on=function(){var t=this;if(!this.isActive)return this.$container.trigger(this.options.eventNames.beforeOn),this.queue=[],this.isActive=!0,this.isSliding=!1,this.$container.addClass(this.options.classNames.container),this.$views.addClass(this.options.classNames.view),this.$activeView.addClass(this.options.classNames.activeView),this.$views.not(this.$activeView).css("display","none"),this.options.maintainViewportHeight&&(this.lastViewportHeight=window.innerHeight),null!=this.options.dataAttrEvent&&(this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]",function(n){var r,i;return r=e(n.currentTarget),i=r.data(t.options.dataAttr.push),i.length||(i=r.attr("href")),i.length?(n.preventDefault(),t.pushView(i)):void 0}),this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]",function(n){var r,i;return r=e(n.currentTarget),i=r.data(t.options.dataAttr.pop),i.length||(i=r.attr("href")),i.length?(n.preventDefault(),t.popView(i)):void 0})),this.$container.trigger(this.options.eventNames.on)},t.prototype.off=function(){return this.isActive?(this.$container.trigger(this.options.eventNames.beforeOff),this.queue=[],this.isActive=!1,this.isSliding=!1,this.$container.removeClass(this.options.classNames.container),this.$views.removeClass(this.options.classNames.view+" "+this.options.classNames.activeView),this.$views.css("display",""),this.options.maintainViewportHeight&&e("html").css("min-height",""),null!=this.options.dataAttrEvent&&(this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]"),this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]")),this.$container.trigger(this.options.eventNames.off)):void 0},t.prototype.toggle=function(e){return null==e&&(e=!this.isActive),e?this.on():this.off()},t.prototype.changeView=function(t,n){var u,l,c,h,p,v,m,y,b,w,E,S,x,T,N,C,k,L,A=this;if(l=e(t),l.length&&l[0]!==this.$activeView[0]){if(h=arguments,this.isSliding||this.queue.length)return this.queue.push(h);if(this.isSliding=!0,this.$container.trigger(this.options.eventNames.viewChangeStart,h),u=this.$activeView.add(l),x={},w={},T=["left","position","top","width"],b=i(this.$container),y={height:r(this.$container),overflow:"hidden",position:"relative",width:"100%"},c={},N={},v={position:"absolute",top:0,width:b},this.options.useTransformProps?(C=this.options.cssPrefix+"transform",L=this.options.use3D?"translate3d(":"translateX(",k=this.options.use3D?", 0, 0)":")",T.push(C),v.left=0,N[C]=L+s(n,100,-100)+"%"+k,x[C]=L+s(n,-100,100)+"%"+k,w[C]=L+"0"+k):(c.left=0,N.left=s(n,b,-1*b),x.left=s(n,-1*b,b),w.left=0),S=function(){return A.isSliding=!1,A.$container.trigger(A.options.eventNames.viewChangeEnd,h),A.queue.length?A.changeView.apply(A,A.queue.shift()):void 0},E=function(){return o(A.$container,["height","overflow","position","width"]),A.$activeView.removeClass(A.options.classNames.activeView),l.addClass(A.options.classNames.activeView),A.$activeView=l,A.options.scrollCallback&&"end"===A.options.scrollOn?A._scrollToTop(S):S()},p=function(){return A.options.resizeHeight?(A.options.maintainViewportHeight&&window.innerHeight>A.lastViewportHeight&&(A.lastViewportHeight=window.innerHeight,$html.css("min-height",A.lastViewportHeight+top+"px")),A.$container.animate({height:r(l)},A.options.heightDuration,A.options.easing,E)):E()},m=function(){return A.$container.css(y),u.css(v),A.$activeView.css(c),l.css(N),l.show(),A.$activeView.animate(x,A.options.duration,A.options.easing,function(){return o(this,T).hide()}),l.animate(w,A.options.duration,A.options.easing,function(){return o(l,T),A.options.concurrentHeightChange?void 0:p()}),A.options.concurrentHeightChange?p():void 0},this.options.scrollCallback&&"start"===this.options.scrollOn){if(!this.options.concurrentScroll)return this._scrollToTop(m);this._scrollToTop()}return m()}},t.prototype._scrollToTop=function(t){var n;return n=this.options.scrollToContainerTop?this.$container.position().top:0,e(window).scrollTop()>n?this.options.scrollCallback(n,this.options.scrollDuration,t):null!=t?t():void 0},t.prototype.pushView=function(e){return this.changeView(e,"push")},t.prototype.popView=function(e){return this.changeView(e,"pop")},t}(),e.fn.simpleSlideView=function(n,r){return null==n&&(n={}),"object"!=typeof n&&(n={views:n}),"object"==typeof r&&e.extend(n,r),new t(this,n)}}.call(this);